<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <!-- Include the CesiumJS JavaScript and CSS files -->
  <script src="https://cesium.com/downloads/cesiumjs/releases/1.112/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.112/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <link href="/project-x/styles.css" rel="stylesheet">
  <style>
    @import url(https://sandcastle.cesium.com/templates/bucket.css);
  </style>
</head>

<body>
  <div id="cesiumContainer" class="fullSize"></div>
  <script type="module">
    // Your access token can be found at: https://ion.cesium.com/tokens.
    // This is the default access token from your ion account

    Cesium.Ion.defaultAccessToken = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJqdGkiOiJhOTRiZjk4My0xOGVmLTQ1NTctODA3Mi1hN2I3MmFkYmYzYWYiLCJpZCI6MTg0ODQ2LCJpYXQiOjE3MDI3ODA4MDd9.YIflQ_56PD-ztvOCikrMhA8iLfSR6hKAvvGTiPei0r8';

    // Initialize the Cesium Viewer in the HTML element with the `cesiumContainer` ID.
    //const viewer = new Cesium.Viewer('cesiumContainer');    
    function startup(Cesium) {
      'use strict';
      var dynamicRate = 0.1;

      //Set viewer options
      var viewer = new Cesium.Viewer('cesiumContainer', {
        contextOptions: {
          webgl: {
            alpha: true
          }
        },
        // imageryProvider: new Cesium.IonImageryProvider({ assetId: 3845 }),
        animation: false,
        baseLayerPicker: false,
        fullscreenButton: false,
        vrButton: false,
        geocoder: false,
        homeButton: false,
        infoBox: false,
        sceneModePicker: false,
        selectionIndicator: false,
        timeline: false,
        navigationHelpButton: false,
        enableLighting: true
      });

      //Remove Sun, Moon, Sky & Atmosphere
      viewer.scene.skyBox.destroy();
      viewer.scene.skyBox = undefined;
      viewer.scene.skyAtmosphere.destroy();
      viewer.scene.skyAtmosphere = undefined;
      viewer.scene.sun.destroy();
      viewer.scene.sun = undefined;
      viewer.scene.moon.destroy();
      viewer.scene.moon = undefined;
      viewer.scene.backgroundColor = new Cesium.Color(0, 0, 0, 0);

      viewer.camera.setView({ destination: Cesium.Cartesian3.fromDegrees(0.0, 0.0, 19000000.0) });

      //Enable spin motion on the globe
      var entities = viewer.entities;
      var previousTime = Date.now();
      viewer.scene.postRender.addEventListener(function (scene, time) {
        var spinRate = dynamicRate;
        var currentTime = Date.now();
        var delta = (currentTime - previousTime) / 1000;
        previousTime = currentTime;
        viewer.scene.camera.rotate(Cesium.Cartesian3.UNIT_Z, spinRate * delta);
      });

      //Add Billboards for Made Media Works
      const melbourneTheatreCompany = viewer.entities.add({
        position: Cesium.Cartesian3.fromDegrees(144.96, -37.82),
        billboard: {
          image: "/project-x/map-mtc.png",
          width: 64,
          height: 64,
        }
      });

      const newYorkCityBallet = viewer.entities.add({
        position: Cesium.Cartesian3.fromDegrees(-73.98, 40.03),
        billboard: {
          image: "/project-x/map-nycb.png",
          width: 64,
          height: 64,
        }
      });

      const royalAlbertHall = viewer.entities.add({
        position: Cesium.Cartesian3.fromDegrees(-0.182, 51.50),
        billboard: {
          image: "/project-x/map-rah.png",
          width: 64,
          height: 64,
        }
      });

    }

    if (typeof Cesium !== 'undefined') {
      startup(Cesium);
    } else if (typeof require === 'function') {
      require(['Cesium'], startup);
    }
  </script>
  </div>
</body>

</html>